package STUART.GUI;

import java.awt.Color;

import javax.swing.*;

import STUART.ADT.*;

public class RuleWizardVariablePanel extends JPanel
{
	KnowledgeBase knowledgeBase;
	
	JLabel nameLabel, descriptionLabel, queryLabel, askLabel, valuesLabel;
	JTextField nameField;
	JTextArea queryField, descriptionField;
	JRadioButton askYes, askNo;
	ButtonGroup askGroup;
	
	JList variableList;
	DefaultListModel variableListModel;
	JScrollPane variableListScrollPane;
	
	GroupLayout layout;
	
	Variable selectedVariable;
	boolean blockInput;
	
	public RuleWizardVariablePanel(KnowledgeBase kb)
	{
		super();
		
		knowledgeBase = kb;
		
		createComponents();
		layoutComponents();
		
	}
	
	public void setKnowledgeBase(KnowledgeBase kb)
	{
		knowledgeBase = kb;
	}
	
	public void createComponents()
	{
		nameLabel = new JLabel("Name: ");
		descriptionLabel = new JLabel("Description: ");
		queryLabel = new JLabel("Query Prompt: ");
		askLabel = new JLabel("Ask User? ");
		valuesLabel = new JLabel("Possible values");
		
		nameField = new JTextField(30);
		
		descriptionField = new JTextArea(3, 30);
		descriptionField.setLineWrap(true);
		descriptionField.setBorder(nameField.getBorder());
		
		queryField = new JTextArea(3, 30);
		queryField.setLineWrap(true);
		queryField.setBorder(nameField.getBorder());

		askYes = new JRadioButton("Yes");
		askNo = new JRadioButton("No");
		
		askGroup = new ButtonGroup();
		askGroup.add(askYes);
		askGroup.add(askNo);
		
		variableListModel = new DefaultListModel();
		variableList = new JList(variableListModel);
		variableListScrollPane = new JScrollPane(variableList);
		setVariableList();
	}
	
	public void setVariableList()
	{
		blockInput = true;
		variableListModel.clear();
		
		for (Variable v : knowledgeBase.getVariablesArray())
		{
				variableListModel.addElement(v);
		}	
		
		
		blockInput = false;
	}
	
	public void layoutComponents()
	{
		layout = new GroupLayout(this);
		this.setLayout(layout);
		
		layout.setAutoCreateGaps(true);
		layout.setAutoCreateContainerGaps(true);
		
		layout.linkSize(SwingConstants.HORIZONTAL, nameLabel, descriptionLabel, queryLabel, askLabel);
		
		layout.setHorizontalGroup(
				layout.createSequentialGroup()
				.addComponent(variableListScrollPane, 200, GroupLayout.PREFERRED_SIZE, GroupLayout.PREFERRED_SIZE)
				.addGroup(layout.createParallelGroup()
						.addGroup(layout.createSequentialGroup()
								.addComponent(nameLabel)
								.addComponent(nameField))
						.addGroup(layout.createSequentialGroup()
								.addComponent(descriptionLabel)
								.addComponent(descriptionField))
						.addGroup(layout.createSequentialGroup()
								.addComponent(queryLabel)
								.addComponent(queryField))
						.addGroup(layout.createSequentialGroup()
								.addComponent(askLabel)
								.addComponent(askYes)
								.addComponent(askNo)))
		);
		
		layout.setVerticalGroup(
				layout.createParallelGroup()
				.addComponent(variableListScrollPane)
				.addGroup(layout.createSequentialGroup()
						.addGroup(layout.createParallelGroup()
								.addComponent(nameLabel)
								.addComponent(nameField, GroupLayout.PREFERRED_SIZE, GroupLayout.PREFERRED_SIZE, GroupLayout.PREFERRED_SIZE))
						.addGroup(layout.createParallelGroup()
								.addComponent(descriptionLabel)
								.addComponent(descriptionField))
						.addGroup(layout.createParallelGroup()
								.addComponent(queryLabel)
								.addComponent(queryField))
						.addGroup(layout.createParallelGroup()
								.addComponent(askLabel)
								.addComponent(askYes)
								.addComponent(askNo)))
		);
	}
	
	

}
